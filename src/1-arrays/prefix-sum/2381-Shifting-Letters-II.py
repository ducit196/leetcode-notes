from typing import List


class Solution:
    def shiftingLetters(self, s: str, shifts: List[List[int]]) -> str:
        n = len(s)
        change = [0] * n
        ans = []
        #Cal the change
        for left,right,shift in shifts:
            if shift == 1:
                change[left] += 1
                if right + 1 < n:       #Stop accumulate
                    change[right + 1] -= 1
            else:
                change[left] -= 1
                if right + 1 < n:
                    change[right + 1] += 1  #Stop accumulate
        for i in range(1, n):
            change[i] = change[i] + change[i - 1]
        for i in range(n):
            change[i] = change[i] % 26
            shifted = ord(s[i]) + change[i]
            if shifted < 97:
                shifted = 122 - (96 - shifted)
            elif shifted > 122:
                shifted = 97 + (shifted - 122 - 1)
            ans.append(chr(shifted))
        return str.join('', ans)

s = "ixuthnbcpmpqfpgcdeuwwddlvtvrjzxdrnvrukzwkmbcqqxerlsdgtsapwmgaqhiyafdgdvffdvqpkpartcftgnfahvzwyazvwvylonycahrenkfznlpozotuszznymffagkyppvjthusukvfsqjwumdyatwvlcfrnqhwtvimhkpfulpzotzhbsscryxloebdchvnrlzosvoeajnddfzpq"
shifts = [[68,195,1],[59,212,1],[40,120,1],[104,120,1],[206,207,1],[141,176,0],[121,128,1],[155,170,1],[196,206,1],[50,106,1],[72,132,1],[110,163,1],[51,70,1],[135,159,1],[93,166,1],[134,161,1],[125,134,0],[65,169,1],[94,174,0],[2,15,1],[212,212,1],[177,183,1],[178,212,0],[67,86,1],[116,154,1],[12,141,1],[184,206,1],[79,108,1],[47,139,1],[186,196,1],[77,193,0],[54,148,0],[108,155,1],[186,204,1],[206,207,1],[168,173,1],[97,119,0],[68,149,0],[92,154,1],[24,107,1],[194,199,1],[50,160,0],[45,194,1],[69,167,1],[28,63,0],[133,166,0],[186,195,1],[103,162,1],[68,208,1],[130,173,1],[118,140,1],[74,198,0],[144,213,1],[125,193,1],[44,186,1],[60,172,1],[204,205,1],[39,64,1],[141,165,0],[177,212,0],[25,98,1],[65,105,1],[152,164,1],[181,191,0],[67,74,0],[185,201,1],[118,153,0],[100,126,0],[60,81,0],[208,209,1],[87,119,0],[72,174,1],[16,107,0],[194,213,1],[43,144,1],[30,200,1],[180,204,0],[40,90,0],[31,102,1],[143,211,1],[181,195,1],[46,191,1],[105,142,0],[50,156,0],[186,200,0],[119,211,1],[102,137,1],[21,37,0],[21,182,0],[142,160,0],[177,185,1],[110,186,1],[28,114,0],[172,210,1],[54,106,0],[92,135,1],[38,48,1],[20,199,0],[148,212,0],[118,194,1],[163,172,0],[168,171,0],[48,146,0],[181,210,1],[189,211,0],[113,165,1],[164,206,1],[132,212,0],[187,203,1],[163,172,1],[6,133,0],[2,14,1],[209,209,0],[4,96,1],[47,71,1],[115,146,0],[27,182,1],[130,140,1],[171,194,0],[175,209,1],[41,70,1],[7,49,1],[111,156,0],[148,206,0],[2,172,0],[93,107,1],[49,165,1],[204,211,1],[174,208,1],[66,173,1],[172,176,1],[99,159,0],[199,199,0],[190,210,1],[187,203,0],[126,152,1],[82,105,0],[79,184,0],[23,173,1],[190,190,0],[67,139,1],[170,202,0],[148,211,0],[9,61,0],[144,186,1],[29,150,1],[29,30,1],[156,172,1],[69,110,1],[53,169,0],[203,209,1],[102,198,0],[212,212,1],[207,207,0],[5,110,1],[75,175,1],[40,63,1],[208,213,1],[11,75,0],[205,209,0],[147,157,1],[8,150,1],[150,171,1],[67,170,1],[78,86,0],[167,171,0],[55,114,0],[107,193,1],[154,207,0],[179,183,1],[109,122,1],[186,191,1],[149,187,1],[30,169,1],[25,150,1],[51,124,1],[46,130,1],[7,15,1],[187,202,1],[198,198,1],[143,185,0],[148,198,1],[208,212,1],[59,192,0],[90,147,1],[30,84,0],[178,195,1],[140,171,0],[159,169,0],[123,209,1],[88,201,1],[60,151,1],[68,146,0],[164,211,0],[75,184,0],[68,192,0],[38,56,1],[105,173,1],[117,201,1],[35,135,0],[160,193,1],[196,201,1],[145,156,0],[91,101,1],[69,198,1],[209,209,1],[211,212,1],[72,144,1],[130,137,1],[128,142,1],[21,34,1],[0,91,1],[189,208,1],[183,190,0],[70,149,0],[192,199,1],[158,163,1],[72,167,1],[5,47,0],[20,158,1],[25,205,1],[181,204,1],[124,170,1],[198,200,0],[17,141,1],[168,178,0],[116,181,0],[91,184,0],[4,172,0],[134,174,1],[7,118,1],[207,212,0],[56,111,1],[34,140,0],[141,173,0],[32,39,0],[193,203,1],[31,92,0],[166,166,0],[154,203,1],[157,184,0],[36,160,1],[177,197,1],[40,169,0],[103,198,0],[110,120,0],[89,184,1],[86,184,0],[137,196,1],[33,213,0],[213,213,0],[52,174,0],[198,203,0],[152,163,1],[22,33,1],[138,201,1],[133,153,1],[162,194,1],[47,170,1],[12,140,0],[58,207,0],[213,213,1],[77,77,0],[86,197,0],[100,143,1],[53,94,1],[143,170,0],[14,165,1],[165,177,0],[99,168,0],[179,209,1],[88,200,1],[94,205,1],[114,196,0],[88,192,0],[46,84,1],[188,199,0],[34,66,1],[115,184,0],[155,191,0],[1,75,1],[205,206,0],[55,143,1],[193,209,0],[133,179,0],[194,204,1],[148,206,1],[85,134,0],[174,204,1],[10,13,0],[85,153,0],[2,175,0],[149,181,0],[55,97,1],[65,193,0],[8,45,0],[52,91,0],[23,81,1],[13,73,1],[193,210,0],[145,211,1],[101,162,0],[165,201,1],[98,192,0],[131,154,0],[208,209,0],[7,117,0],[169,210,1],[192,205,0],[58,74,1],[126,191,1],[188,199,0],[25,200,0],[84,207,1],[25,136,0],[173,213,1],[38,169,0],[62,104,0],[56,77,1],[159,179,1],[140,205,0],[101,186,0],[81,82,1],[164,177,1],[47,186,1],[200,205,0],[117,132,0],[213,213,1],[131,177,1],[13,40,0],[148,207,0],[5,78,0],[50,91,1],[167,174,0],[97,148,0],[180,183,0],[178,199,0],[163,179,1],[153,203,0],[94,200,1],[188,189,0],[105,179,0],[36,81,0],[4,139,1],[138,161,0],[70,90,1],[184,208,0],[210,211,1],[131,165,1],[131,161,1],[53,84,0],[137,163,0],[144,159,0],[184,198,1],[20,187,0],[36,126,1],[35,129,0],[113,116,1],[198,202,0],[147,191,1],[21,32,0],[42,152,0],[99,202,1],[84,97,0],[32,206,1],[193,201,0],[79,136,0],[114,145,0],[141,159,0],[78,88,1],[1,4,0],[7,69,1],[76,182,0],[182,187,1],[82,123,1],[21,205,0],[172,182,1],[200,207,0],[49,182,1],[153,182,0],[14,81,0],[165,166,0],[40,193,1],[30,97,0],[177,183,1],[112,184,1],[160,163,0],[186,200,1],[47,103,1],[124,202,0],[154,202,0],[97,198,0],[177,187,0],[203,204,1],[107,109,0],[9,112,0],[130,139,0],[204,205,1],[129,201,1],[115,118,1],[209,213,0],[27,36,1],[88,93,0],[190,213,0],[47,208,0],[188,213,0],[172,172,1],[123,142,0],[201,210,1],[197,202,1],[150,197,0],[184,199,1],[183,194,1],[84,174,1],[164,183,1],[68,174,0],[79,121,1],[114,124,1],[41,51,1],[110,181,0],[61,68,1],[53,180,0],[68,175,0],[95,100,1],[59,167,0],[212,212,1],[172,192,1],[66,110,1],[58,142,0],[205,209,1],[59,149,0],[72,196,0],[95,162,1],[14,79,0],[164,193,1],[101,109,1],[3,9,0],[18,97,0],[31,158,1],[49,123,0],[79,147,1],[134,186,0],[134,204,0],[47,102,1],[67,189,0],[95,159,0],[97,129,1],[207,210,1],[161,167,1],[54,162,0],[163,199,1],[112,198,1],[60,122,0],[11,60,0],[95,200,0],[12,132,0],[133,180,0],[81,81,1],[58,82,1],[51,177,0],[182,192,0],[144,196,1],[27,139,1],[73,205,1],[169,198,1],[122,191,0],[37,123,1],[154,157,1],[113,166,1],[91,137,1],[185,186,1],[69,188,1],[36,62,0],[63,125,0],[20,163,0],[139,202,0],[210,211,0],[59,114,0],[65,162,1],[212,212,1],[1,121,1],[46,157,0],[2,18,1],[121,192,1],[52,137,1],[148,191,0],[112,154,1],[15,48,1],[111,177,1],[57,145,1],[125,173,0],[192,209,1],[131,149,0],[127,170,0],[46,150,1],[90,96,0],[179,194,0],[106,191,1],[16,125,1],[16,76,0],[75,193,1],[106,208,1],[152,191,0],[198,200,1],[56,193,1],[19,56,0],[48,116,0],[165,210,1],[196,202,1],[45,56,0],[131,211,1],[152,174,1],[197,203,0],[3,130,1],[87,122,0],[14,28,0],[73,100,1],[115,210,1],[2,27,1],[91,91,1],[177,207,1],[111,134,1],[163,206,1],[4,55,1],[81,147,0],[172,174,0],[102,205,1],[59,149,1],[128,191,0],[136,183,1],[104,210,0],[49,166,0],[126,206,1],[124,144,1],[170,176,0],[168,196,0],[128,163,1],[197,209,0],[41,89,0],[59,180,0],[71,194,1],[163,165,1],[156,158,0],[168,182,0],[79,162,0],[70,90,1],[165,185,1],[185,190,0],[14,183,1],[52,77,1],[42,129,0],[45,126,0],[169,189,1],[159,182,0],[203,203,0],[25,35,0],[22,45,0],[186,196,1],[113,189,0],[70,86,1],[129,171,1],[57,107,0],[176,181,1],[143,204,0],[121,129,0],[119,194,1],[178,206,1],[104,144,1],[20,61,1],[118,127,1],[212,213,1],[171,177,1],[49,59,1],[180,183,1],[168,203,1],[71,97,1],[3,128,0],[155,184,0],[183,204,1],[170,170,1],[180,189,1],[115,118,1],[11,185,1],[188,200,1],[5,69,1],[141,189,0],[43,168,1],[81,102,0],[141,177,1],[124,126,0],[70,159,1],[58,75,1],[113,129,1],[200,200,1],[211,213,1],[60,210,1],[150,160,0],[31,136,0],[101,111,1],[152,161,0],[87,144,0],[140,195,1],[57,132,0],[173,178,1],[33,168,1],[173,202,0],[168,200,0],[107,137,0],[134,178,1],[63,208,1],[73,137,0],[173,181,0],[65,153,0],[53,190,0],[87,140,1],[95,113,0],[151,152,0],[94,181,1],[99,205,1],[30,46,1],[113,142,0],[66,121,1],[129,191,1],[44,67,1],[158,188,0],[11,141,1],[12,103,1],[152,173,0],[64,151,1],[111,181,0],[55,79,1],[21,72,0],[110,150,0],[76,102,1],[187,211,1],[47,53,1],[162,210,0],[38,47,0],[211,213,0],[155,188,1],[60,177,0],[19,176,1],[42,91,1],[126,187,0],[162,192,1],[106,124,1],[10,181,0],[174,184,0],[50,70,0],[74,212,1],[160,203,1],[186,207,0],[189,192,1],[171,193,1],[11,142,0],[172,208,0],[28,176,0],[27,117,0],[17,19,1],[0,164,1],[131,213,0],[88,140,0],[58,169,1],[66,126,0],[20,193,0],[5,76,0],[102,180,1],[143,169,0],[179,182,1],[20,213,0],[197,205,0],[114,156,0],[31,90,1],[205,207,1],[179,203,0],[199,203,1],[7,90,0],[105,179,1],[71,153,1],[179,186,1],[81,213,1],[90,105,0],[46,190,0],[13,53,0],[9,83,0],[182,194,0],[141,196,1],[145,151,0],[6,40,0],[121,135,1],[55,82,1],[191,203,0],[109,114,0],[205,210,1],[133,139,0],[138,185,1],[204,205,1],[68,76,1],[41,66,1],[111,185,1],[44,46,0],[55,81,1],[127,130,1],[194,199,0],[63,193,1],[183,210,1],[84,166,0],[119,180,0],[172,182,0],[69,97,1],[31,166,1],[167,184,0]]
ans = Solution().shiftingLetters(s, shifts)
print(ans)